#!/bin/bash

# Download possibly-updated files required by the Netsage Pipeline
# Use touch to change the file time to the time of download

# -for docker installations - 
#   DOWNLOAD_PATH="/PATH-TO-GIT-CHECKOUT/downloads"
#   SUPPORT_PATH="/PATH-TO-GIT-CHECKOUT/conf-logstash/support"

# -for bare metal installations - run with sudo and use
#   DOWNLOAD_PATH="/var/lib/grnoc/netsage"
#   SUPPORT_PATH="/etc/logstash/conf.d/support"

DOWNLOAD_PATH="-PATH-TO-GIT-CHECKOUT-/downloads"
SUPPORT_PATH="-PATH-TO-GIT-CHECKOUT-/conf-logstash/support"

# MAXMIND ASN 
/usr/bin/wget https://scienceregistry.grnoc.iu.edu/exported/GeoLite2-ASN.mmdb -q -O $DOWNLOAD_PATH/GeoLite2-ASN.mmdb && touch $DOWNLOAD_PATH/GeoLite2-ASN.mmdb

# MAXMIND CITY 
/usr/bin/wget https://scienceregistry.grnoc.iu.edu/exported/GeoLite2-City.mmdb  -q -O $DOWNLOAD_PATH/GeoLite2-City.mmdb && touch $DOWNLOAD_PATH/GeoLite2-City.mmdb

# CAIDA file
/usr/bin/wget https://scienceregistry.grnoc.iu.edu/exported/CAIDA-org-lookup.csv -q -O $DOWNLOAD_PATH/CAIDA-org-lookup.csv && touch $DOWNLOAD_PATH/CAIDA-org-lookup.csv

# SCIENCE REGISTRY
/usr/bin/wget  https://scienceregistry.netsage.global/exported/scireg.mmdb -q -O $DOWNLOAD_PATH/scireg.mmdb && touch $DOWNLOAD_PATH/scireg.mmdb

# FRGP MEMBER LIST 
/usr/bin/wget https://scienceregistry.grnoc.iu.edu/exported/FRGP-members-list.rb -q -O $SUPPORT_PATH/FRGP-members-list.rb && touch $SUPPORT_PATH/FRGP-members-list.rb

# ILIGHT MEMBER LIST 
/usr/bin/wget https://scienceregistry.grnoc.iu.edu/exported/ilight-members-list.rb -q -O $SUPPORT_PATH/ilight-members-list.rb && touch $SUPPORT_PATH/ilight-members-list.rb

# ONENET MEMBER LIST 
/usr/bin/wget https://scienceregistry.grnoc.iu.edu/exported/onenet-members-list.rb -q -O $SUPPORT_PATH/onenet-members-list.rb && touch $SUPPORT_PATH/onenet-members-list.rb

# SENSOR_GROUPS 
/usr/bin/wget https://scienceregistry.grnoc.iu.edu/exported/sensor_groups.json -q -O $SUPPORT_PATH/sensor_groups.json && touch $SUPPORT_PATH/sensor_groups.json

# SENSOR_TYPES 
/usr/bin/wget https://scienceregistry.grnoc.iu.edu/exported/sensor_types.json -q -O $SUPPORT_PATH/sensor_types.json && touch $SUPPORT_PATH/sensor_types.json
